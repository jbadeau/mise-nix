[env]
LUA_PATH="lib/?.lua;;"

[tools]
lua = "5.4.8"
node = "24.5.0"
"nix:shellspec" = "latest"

[tasks.init]
description = "init"
run = [
    'mise plugin link nix $PWD --force',
    'luarocks install busted'
]

[tasks.test]
description = "test"
run = "busted -p %.spec%.lua lib"

[tasks.e2e]
description = "e2e"
run = "shellspec"